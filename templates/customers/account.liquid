<main class="main account">
{%- include "page-header" -%}
  <!-- End PageHeader -->
  <div class="page-content mt-10 mb-10">
    <div class="container pt-1">
      <div class="tab tab-vertical">
        <ul class="nav nav-tabs mb-4" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" href="#dashboard">{{ "customer.account.dashboard" | t }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#orders">{{ 'customer.orders.title' | t }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#address">{{ "customer.account.addresses" | t }}</a>
          </li>
          <li class="nav-item">
            {{ 'layout.customer.log_out' | t | customer_logout_link }}
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="dashboard">
            <p class="mb-2">
              {{ "customer.account.hello_customer_html" | t : customer_name: customer.name }} {{ 'layout.customer.log_out' | t | customer_logout_link }})
            </p>
            <p>
              {{ "customer.account.account_details_html" | t }}
            </p>
          </div>
          <div class="tab-pane" id="orders">

            {% paginate customer.orders by 20 %}
            {% if customer.orders.size != 0 %}

              <table class="shop-table">
                <thead>
                  <tr>
                    <th scope="col">{{ 'customer.orders.order_number' | t }}</th>
                    <th scope="col">{{ 'customer.orders.date' | t }}</th>
                    <th scope="col">{{ 'customer.orders.payment_status' | t }}</th>
                    <th scope="col">{{ 'customer.orders.fulfillment_status' | t }}</th>
                    <th scope="col">{{ 'customer.orders.total' | t }}</th>
                  </tr>
                </thead>
                <tbody>
                  {% for order in customer.orders %}
                    <tr>
                      <td data-label="{{ 'customer.orders.order_number' | t }}" scope="row">
                        <a href="{{ order.customer_url }}" class="btn btn--secondary btn--small" aria-label="{{ 'customer.orders.order_number_link' | t: number: order.name }}">{{ order.name }}</a>
                      </td>
                      <td data-label="{{ 'customer.orders.date' | t }}">{{ order.created_at | time_tag: format: 'date' }}</td>
                      <td data-label="{{ 'customer.orders.payment_status' | t }}">{{ order.financial_status_label }}</td>
                      <td data-label="{{ 'customer.orders.fulfillment_status' | t }}">{{ order.fulfillment_status_label }}</td>
                      <td data-label="{{ 'customer.orders.total' | t }}">{{ order.total_price | money }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>

            {% else %}

            <p class="mb-2">{{ 'customer.orders.none' | t }}</p>
            <a href="/collections/all" class="btn btn-primary">{{ 'customer.orders.go_shop' | t }}</a>

            {% endif %}
            {%- if paginate.pages > 1 -%}
              {% include 'pagination', paginate: paginate %}
            {%- endif -%}
          {% endpaginate %}

          </div>
          <div class="tab-pane" id="address">
            {% paginate customer.addresses by 5 %}
            <h3 class="title title-simple text-left">{{ 'customer.addresses.title' | t  }}</h3>
                <p>
                  <button type="button" class="btn btn-primary address-new-toggle" id="AddressNewButton" aria-expanded="false" aria-owns="AddressNewForm">{{ 'customer.addresses.add_new' | t }}</button>
                </p>


                {% comment %}
                  Add address form, hidden by default
                {% endcomment %}
                <div id="AddressNewForm" class="summary addresses-form-box form-box hide">
                  {% form 'customer_address', customer.new_address %}
                  <h3 class="title title-simple text-left">{{ 'customer.addresses.add_new' | t }}</h3>

                    <div class="form-group">
                      <label for="AddressFirstNameNew">{{ 'customer.addresses.first_name' | t }}</label>
                      <input class="form-control" type="text" id="AddressFirstNameNew" name="address[first_name]" value="{{ form.first_name }}" autocomplete="given-name">
                    </div>
                    <div class="form-group">
                      <label for="AddressLastNameNew">{{ 'customer.addresses.last_name' | t }}</label>
                        <input class="form-control" type="text" id="AddressLastNameNew" name="address[last_name]" value="{{ form.last_name }}" autocomplete="family-name">
                    </div>

                    <div class="form-group">
                      <label for="AddressCompanyNew">{{ 'customer.addresses.company' | t }}</label>
                      <input class="form-control" type="text" id="AddressCompanyNew" name="address[company]" value="{{ form.company }}" autocomplete="organization">
                    </div>

                    <div class="form-group">
                      <label for="AddressAddress1New">{{ 'customer.addresses.address1' | t }}</label>
                        <input class="form-control" type="text" id="AddressAddress1New" name="address[address1]" value="{{ form.address1 }}" autocomplete="street-address address-line1">
                    </div>

                    <div class="form-group">
                      <label for="AddressAddress2New">{{ 'customer.addresses.address2' | t }}</label>
                      <input class="form-control"type="text" id="AddressAddress2New" name="address[address2]" value="{{ form.address2 }}" autocomplete="street-address address-line2">
                    </div>

                    <div class="form-group">
                      <label for="AddressCityNew">{{ 'customer.addresses.city' | t }}</label>
                      <input class="form-control"  type="text" id="AddressCityNew" name="address[city]" value="{{ form.city }}" autocomplete="address-level2">
                    </div>

                    <div class="form-group">
                      <label for="AddressCountryNew">{{ 'customer.addresses.country' | t }}</label>
                      <div class="select-box">
                        <select  class="form-control" id="AddressCountryNew" name="address[country]" data-default="{{ form.country }}" autocomplete="country">{{ all_country_option_tags }}</select>
                      </div>
                    </div>

                    <div class="form-group" id="AddressProvinceContainerNew" style="display:none">
                      <label for="AddressProvinceNew">{{ 'customer.addresses.province' | t }}</label>
                      <div class="select-box">
                        <select  class="form-control" id="AddressProvinceNew" name="address[province]" data-default="{{ form.province }}" autocomplete="address-level1"></select>
                      </div>
                    </div>
                  
                    <div class="form-group">
                      <label for="AddressZipNew">{{ 'customer.addresses.zip' | t }}</label>
                      <input class="form-control"  type="text" id="AddressZipNew" name="address[zip]" value="{{ form.zip }}" autocapitalize="characters" autocomplete="postal-code">
                    </div>

                    <div class="form-group">
                      <label for="AddressPhoneNew">{{ 'customer.addresses.phone' | t }}</label>
                      <input class="form-control" type="tel" id="AddressPhoneNew" name="address[phone]" value="{{ form.phone }}" autocomplete="phone">
                    </div>

                    <div class="form-group">
                      <div class="form-checkbox">
                        <input type="checkbox" id="address_default_address_new" name="address[default]" class="custom-checkbox" value="1">
                        <label class="form-control-label font-secondary" for="address_default_address_new">{{ 'customer.addresses.set_default' | t }}</label>
                      </div>
                    </div>

                    <div class="form-group">
                      <input type="submit" class="btn btn-primary" value="{{ 'customer.addresses.add' | t }}">
                      <button type="button" class="btn btn-secondary text-link address-new-toggle">{{ 'customer.addresses.cancel' | t }}</button>
                    </div>

                  {% endform %}
                  <hr>
                </div>
                {% comment %}
                  List all customer addresses with a unique edit form.
                  Also add pagination in case they have a large number of addresses
                {% endcomment %}
                <div class="row mt-5">
                  {% for address in customer.addresses %}
                  <div class="col-lg-6 mb-4">
                    <div class="card card-address">
                      <div class="card-body">
                        {% if address == customer.default_address %}
                        <h3 class="title title-simple text-left">{{ 'customer.addresses.default' | t }}</h3>
                        {% endif %}
                        <p>{{ address | format_address }}</p>

                        <ul class="list-style-none addresses-action d-flex">
                          <li>
                            <button
                              id="EditFormButton_{{ address.id }}"
                              type="button"
                              class="btn btn-link btn-primary btn-underline address-edit-toggle"
                              data-form-id="{{ address.id }}"
                              aria-owns="EditAddress_{{ address.id }}"
                              aria-expanded="false"
                            >
                              {{ 'customer.addresses.edit' | t }} <i class="la la-la la-edit"></i>
                            </button>
                          </li>
                          <li>
                            <button
                              type="button"
                              class=" btn btn-link btn-secondary btn-underline address-delete"
                              data-target="{{ address.url }}"
                              data-confirm-message="{{ 'customer.addresses.delete_confirm' | t }}"
                            >
                              {{ 'customer.addresses.delete' | t }} <i class="la la-la la-remove"></i>
                            </button>
                          </li>
                        </ul>

                      <div id="EditAddress_{{ address.id }}" class="mt-5 summary addresses-form-box hide">
                        {% form 'customer_address', address %}

                        <h3 class="title title-simple text-left">{{ 'customer.addresses.edit_address' | t }}</h3>
                            <div class="form-group">
                              <label for="AddressFirstName_{{ form.id }}">{{ 'customer.addresses.first_name' | t }}</label>
                              <input class="form-control" type="text" id="AddressFirstName_{{ form.id }}" name="address[first_name]" value="{{ form.first_name }}" autocomplete="given-name">
                            </div>
                        
                            <div class="form-group">
                              <label for="AddressLastName_{{ form.id }}">{{ 'customer.addresses.last_name' | t }}</label>
                              <input class="form-control" type="text" id="AddressLastName_{{ form.id }}" name="address[last_name]" value="{{ form.last_name }}" autocomplete="family-name">
                            </div>

                          <div class="form-group">
                            <label for="AddressCompany_{{ form.id }}">{{ 'customer.addresses.company' | t }}</label>
                            <input class="form-control" type="text" id="AddressCompany_{{ form.id }}" name="address[company]" value="{{ form.company }}" autocomplete="organization">
                          </div>

                          <div class="form-group">
                            <label for="AddressAddress1_{{ form.id }}">{{ 'customer.addresses.address1' | t }}</label>
                            <input class="form-control" type="text" id="AddressAddress1_{{ form.id }}" name="address[address1]" value="{{ form.address1 }}" autocomplete="street-address address-line1">
                          </div>

                          <div class="form-group">
                            <label for="AddressAddress2_{{ form.id }}">{{ 'customer.addresses.address2' | t }}</label>
                            <input class="form-control" type="text" id="AddressAddress2_{{ form.id }}" name="address[address2]" value="{{ form.address2 }}" autocomplete="street-address address-line2">
                          </div>

                          <div class="form-group">
                            <label for="AddressCity_{{ form.id }}">{{ 'customer.addresses.city' | t }}</label>
                            <input class="form-control" type="text" id="AddressCity_{{ form.id }}" name="address[city]" value="{{ form.city }}" autocomplete="address-level2">
                          </div>

                          <div class="form-group">
                            <label for="AddressCountry_{{ form.id }}">{{ 'customer.addresses.country' | t }}</label>
                            <div class="select-box">
                              <select id="AddressCountry_{{ form.id }}"  class="form-control address-country-option" data-form-id="{{ form.id }}" name="address[country]" data-default="{{ form.country }}" autocomplete="country">{{ all_country_option_tags }}</select>
                            </div>
                          </div>

                          <div class="form-group" id="AddressProvinceContainer_{{ form.id }}" style="display:none">
                            <label for="AddressProvince_{{ form.id }}">{{ 'customer.addresses.province' | t }}</label>
                            <div class="select-box">
                              <select id="AddressProvince_{{ form.id }}" name="address[province]" data-default="{{ form.province }}" autocomplete="address-level1"></select>
                            </div>
                          </div>

                          <div class="form-group">
                            <label for="AddressZip_{{ form.id }}">{{ 'customer.addresses.zip' | t }}</label>
                            <input class="form-control" type="text" id="AddressZip_{{ form.id }}" name="address[zip]" value="{{ form.zip }}" autocapitalize="characters" autocomplete="postal-code">
                          </div>

                          <div class="form-group">
                              <label for="AddressPhone_{{ form.id }}">{{ 'customer.addresses.phone' | t }}</label>
                              <input  class="form-control" type="tel" id="AddressPhone_{{ form.id }}" name="address[phone]" value="{{ form.phone }}" autocomplete="phone">
                            </div>

                            <div class="form-group">
                              <div class="form-checkbox">
                                <input type="checkbox" id="address_default_{{ form.id }}" name="address[default]" class="custom-checkbox" value="1" {% if address == customer.default_address %}checked{% endif %}>
                                <label class="form-control-label font-secondary" for="address_default_{{ form.id }}">{{ 'customer.addresses.set_default' | t }}</label>
                              </div>
                            </div>

                            <div class="form-group">
                              <input type="submit" class="btn btn-primary" value="{{ 'customer.addresses.update' | t }}">
                              <button type="button" class="btn btn-secondary text-link address-edit-toggle" data-form-id="{{ form.id }}">{{ 'customer.addresses.cancel' | t }}</button>
                            </div>
                          </div>

                        {% endform %}
                        <hr>
                      </div>

                      </div>
                    </div>
                  {% endfor %}
                </div>

                {%- if paginate.pages > 1 -%}
                  {% include 'pagination', paginate: paginate %}
                {%- endif -%}

                    
          {% endpaginate %}
           
          </div>
        </div>
      </div>
    </div>
  </div>
</main>